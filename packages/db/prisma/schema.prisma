generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum MenuType {
  TAKEAWAY
  DINEIN
}

enum OrderStatus {
  CREATED
  PREPARING
  READY
  DELIVERED
  CANCELLED
  NOSHOW
}

model Restaurant {
  id        String   @id @default(cuid())
  name      String
  address   String
  lat       Float
  lng       Float
  zoneTag   String
  createdAt DateTime @default(now())

  menus Menu[]
}

model Menu {
  id                   String   @id @default(cuid())
  restaurantId         String
  type                 MenuType
  title                String
  description          String
  priceCents           Int
  currency             String
  quantity             Int
  availableFrom        DateTime
  availableTo          DateTime
  expiresAt            DateTime
  allowTimeAdjustment  Boolean  @default(false)
  createdAt            DateTime @default(now())

  restaurant Restaurant @relation(fields: [restaurantId], references: [id])
  orders     Order[]
}

model Order {
  id            String      @id @default(cuid())
  menuId        String
  status        OrderStatus @default(CREATED)
  customerName  String
  customerEmail String
  code          String
  createdAt     DateTime    @default(now())

  menu Menu @relation(fields: [menuId], references: [id])
}
